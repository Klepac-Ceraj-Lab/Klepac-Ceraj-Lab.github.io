<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/css/jtd.css"> <link rel=icon  href="/assets/favicon.ico"> <title>File Sync and Backup</title> <div class=page-wrap > <div class=side-bar > <div class=header > <a href="/" class=title > VKC Lab Protocols </a> </div> <label for=show-menu  class=show-menu >MENU</label> <input type=checkbox  id=show-menu  role=button > <div class=menu  id=side-menu > <ul class=menu-list > <li class="menu-list-item "><a href="/" class="menu-list-link ">Home</a> <li class="menu-list-item "><a href="/wetlab/" class="menu-list-link ">Wet Lab Protocols</a> <li class="menu-list-item active"><a href="/drylab/" class="menu-list-link ">Dry Lab Protocols</a> <li class="menu-list-item "><a href="/handbook/" class="menu-list-link ">Lab Handbook</a> <ul class="menu-list-child-list "> <li class="menu-list-item "><a href="#ii_research_opportunities_and_expectations" class=menu-list-link >Research Expectations</a> <li class="menu-list-item "><a href="#iib_additional_expectations_for_thesis_students" class=menu-list-link >Thesis Expectations</a> <li class="menu-list-item "><a href="#iii_meetings_and_presentations" class=menu-list-link >Presentations</a> <li class="menu-list-item "><a href="#vi_agreements_and_contracts" class=menu-list-link >Agreements and Contracts</a> </ul> </ul> </div> <div class=footer > This is <em>Just the docs</em>, adapted from the <a href="https://github.com/pmarsceill/just-the-docs" target=_blank >Jekyll theme</a>. </div> </div> <div class=main-content-wrap > <div class=main-content > <div class=main-header > <a id=github  href="//github.com/Klepac-Ceraj-Lab">The VKC Lab on GitHub</a> </div> <div class=franklin-content > <h1 id=file_sync_and_backup ><a href="#file_sync_and_backup" class=header-anchor >File Sync and Backup</a></h1> <p>All of the primary <a href="computers/">lab drives</a> are regularly synced to the cloud using google drive &#40;since we have unlimited storage there&#41;. There is a Shared Drive<sup id="fnref:shareddrive"><a href="#fndef:shareddrive" class=fnref >[1]</a></sup> on google drive for backed up directories. The content of these drives can not be accessed directly, they are encrypted chunks of bytes.</p> <p>Many sensitive files are also duplicated across physical drives on campus, since transferring to/from the cloud is much more time-intensive than transfers within the Wellesley network, and this should be sufficient for most failure points &#40;it is unlikely that all drives will fail at the same time&#41;.</p> <h2 id=instructions ><a href="#instructions" class=header-anchor >Instructions</a></h2> <ul> <li><p>If you are transferring files between lab servers, or between your own computer and lab servers, you probably want to use <code>rsync</code> - <a href=rsync >see here</a>.</p> <li><p>If you are backing up to or restoring drives from google drive, you will use <code>duplicity</code>.</p> <ul> <li><p>If you have never set up sync before, <a href="#setting_up_duplicity">follow the instructions below</a>.</p> <li><p>If you need to sync from a local drive to the cloud &#40;eg as part of the <a href="../download">download and archive protocol</a>&#41;, then <a href=backup >go here</a>.</p> <li><p>If you need to restore a backup from the cloud to your local drive, <a href=restore >go here</a>.</p> </ul> </ul> <h2 id=setting_up_duplicity ><a href="#setting_up_duplicity" class=header-anchor >Setting up duplicity</a></h2> <p><code>duplicty</code><sup id="fnref:duplicity"><a href="#fndef:duplicity" class=fnref >[2]</a></sup> is a command-line tool that enables encrypted and incremental backup with a number of different services, including google drive &#40;which is important, since we have unlimited storage on Wellesley&#39;s gdrive&#41;.</p> <p><code>duplicity</code> should already be installed on lab servers. If you need it on your own machine, your best bet is to use <a href="http://brew.sh">Home Brew</a> &#40;<code>brew install duplicity</code>&#41;.</p> <h3 id=set_up_google_api_and_duplicity ><a href="#set_up_google_api_and_duplicity" class=header-anchor >Set up google api and duplicity</a></h3> <p>There are a bunch of guides online to setting up google drive as a backend for <code>duplicity</code>. If you&#39;re setting up gdrive for the first time, follow the tutorial <a href="https://rgarth.github.io/2017/10/29/Grive-and-Duplicity/">found here</a>. The basic procedure is</p> <ol> <li><p>Make yourself an app using google developer console that has the ability to manage gdrive folders &#40;I was able to make one that only had read/write permission on its own folders&#41;. More info at the link above.</p> <li><p>Get the credentials, and save them in a file on your local drive.</p> <li><p>Make sure to install right versions of python dependencies<sup id="fnref:pydrive"><a href="#fndef:pydrive" class=fnref >[3]</a></sup> - you need <code>httplib2</code> v.0.15.0 and <code>google-api-python-client</code> v1.6. If you&#39;re using a lab computer like <code>hopper</code> or <code>ada</code>, this should already be done.</p> </ol> <h2 id=next_steps ><a href="#next_steps" class=header-anchor >Next steps</a></h2> <ul> <li><p><a href=backup >Back up a drive to Google Drive using <code>duplicity</code></a></p> <li><p><a href=restore >Restore a drive from Google Drive using <code>duplicity</code></a></p> </ul> <h2 id=references ><a href="#references" class=header-anchor >References</a></h2> <p><table class=fndef  id="fndef:duplicity"> <tr> <td class=fndef-backref ><a href="#fnref:duplicity">[2]</a> <td class=fndef-content ><a href="https://gitlab.com/duplicity/duplicity">Duplicity</a> is a program for making encrypted backups. Install it with <code>sudo apt install duplicity</code> &#40;linux&#41; or <code>brew install duplicity</code> &#40;mac&#41; </table> <table class=fndef  id="fndef:pydrive"> <tr> <td class=fndef-backref ><a href="#fnref:pydrive">[3]</a> <td class=fndef-content >https://stackoverflow.com/a/61188575/3742902 </table> <table class=fndef  id="fndef:shareddrive"> <tr> <td class=fndef-backref ><a href="#fnref:shareddrive">[1]</a> <td class=fndef-content >https://drive.google.com/drive/u/1/folders/0AAFXKrJrjeBbUk9PVA </table> </p> <div class=page-foot > <div class=copyright > &copy; VKC Lab Staff | Last modified: December 09, 2021. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> </div> </div> </div> </div> <!-- end of class page-wrap-->